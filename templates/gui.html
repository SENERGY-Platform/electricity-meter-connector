<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Ferraris Arduino Serial Gateway</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
	<script>
		function httpPost(uri) {
		    var xhttp = new XMLHttpRequest();
			xhttp.open("POST", uri, true);
			xhttp.send();
		}
	</script>
	{% if d_id %}
	<script>
		var ws = new WebSocket("ws://127.0.0.1:5678/");
		ws.onmessage = function (event) {
			var content = document.createTextNode(event.data);
			document.getElementById('content').innerHTML += event.data + '<br>';
			document.getElementById('content').scrollTop = document.getElementById('content').scrollHeight
		};
    </script>
	{% endif %}
</head>

<body>
<div class="wrapper">

	<header class="header">
		<div class="main-navigation">
			{% for device in devices %}
			<button class="btn" type="button" onclick="location.href=('{{ device }}');">{{ device }}</button>
			{% endfor %}
		</div>
    </header><!-- .header-->

	<div class="middle">

		<div class="container">
			<main id="content" class="content">

			</main><!-- .content -->
		</div><!-- .container-->

		<aside class="left-sidebar">
			<div class="sub-navigation">
				{% if d_id %}
				<button class="btn" type="button" onclick="httpPost('{{ d_id }}/conf')">Configure</button>
				<button class="btn" type="button" onclick="httpPost('{{ d_id }}/mr')">Manual Read</button>
				<button class="btn" type="button" onclick="httpPost('{{ d_id }}/strt')">Start Detection</button>
				<button class="btn" type="button" onclick="httpPost('{{ d_id }}/stp')">Stop Current Action</button>
				<button class="btn" type="button" onclick="httpPost('{{ d_id }}/eas')">Enable Auto Start</button>
				<button class="btn" type="button" onclick="httpPost('{{ d_id }}/das')">Disable Auto Start</button>
				{% endif %}
			</div>
		</aside><!-- .left-sidebar -->

	</div><!-- .middle-->

</div><!-- .wrapper -->

<footer class="footer">
	<img id="logo" src="{{ url_for('static', filename='logo.svg') }}">
</footer><!-- .footer -->

</body>
</html>